<html>

<head> 
  <!-- Import main Annotorious script and CSS -->
  <link rel="stylesheet" href="annotorious.css" type="text/css" />
  <script src="annotorious.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
 


  <!-- Import the plugin script -->
  
  <!-- Use the API to attach and activate the plugin -->
  
  <script src="browser-websocket.min.js"></script>
<script>
    var ws = new BrowserWebSocket('ws://localhost:8080');
 
    ws.on('open', function() {
        ws.emit('hello world');
    });
 
    ws.on('message', function(e) {
        var message = e.data;
        console.log(message);
    });
	
</script>
  <script>
function myFunction() {
	var annotations = anno.getAnnotations(); 
	var obj = {
	   table: []
	};
	if (annotations.length > 0) 
	{
		var i;
		var text = ""; 
		for (i = 0; i < annotations.length; i++) { 
			obj.table.push(annotations[i]);
			text += JSON.stringify(annotations[i]) + "<br>";
		}
		var json = JSON.stringify(obj);
		document.getElementById("demo").innerHTML = text; 
		var fs = require('fs');
		fs.writeFile('myjsonfile.json', json, 'utf8', callback);
	}
	//document.getElementById("demo").innerHTML = anno.getAnnotations(); 
	anno.addHandler('onAnnotationCreated', function(annotation) {
    console.log(annotation.text);

});
}
</script>
<script>


var obj = {
    "key": "value",
    "key2": "value2"
};
var data = JSON.stringify(obj);

$("#clickMe").click(function () {
	alert('You have clicked something');
    $.ajax({
        url: "https://api.myjson.com/bins",
        type: "POST",
        data: data,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data, textStatus, jqXHR) {
            var json = JSON.stringify(data);
            $("#data").val(json);
        }
    });
});
</script> 
<script>
$('#submit-btn').on('click', function(e) {
    e.preventDefault();
    if( $('#name').val() ){
        $.ajax({
            url     : 'savejson.php',
            method  : 'post',
            data    : { 'name': $('#name').val() },
            success : function( response ) {
                alert( response );
            }
        });
    }
});
</script>
  
</head>
<body> 
<p>Define a region or two and press the button to view the data that will be collected.</p>
<br>
<img id='imgOne' src="barnyardScaled.jpg" style="width: 600; height: 600" class="annotatable" />
<!--img id='imgOne' src="daliScaled.jpg" class="annotatable" />
<img id='imgOne' src="runawayScaled.jpg" class="annotatable" />
<img id='imgOne' src="nighthawksScaled.jpg" class="annotatable" />
<img id='imgOne' src="stilllifeScaled.jpg" class="annotatable" />
<img id='imgOne' src="giraffesScaled.jpg" class="annotatable" />
<img id='imgOne' src="mondrianScaled.jpg" class="annotatable" />
<img id='imgOne' src="pokerScaled.png" class="annotatable" />
<img id='imgOne' src="starrynightScaled.jpg" class="annotatable" />
<img id='imgOne' src="royalsScaled.jpg" class="annotatable" /-->
<p id="demo"></p>
<p id="demo2"></p> 
<button type="button" onclick="myFunction()">Print Region Data</button>



<!--form>
    <input type="text" id="name" name="name">
    <button type="submit" id="submit-btn">
</form-->
<hr>
<br>
<textarea id="data" rows="5" cols="40"></textarea>
<br />
<input id="clickMe" type="button" value="POST Example" />


<script>
//document.getElementById("demo").innerHTML = anno.getAnnotations(); 
</script>

</body> 
</html>